window.CanvasEvents=function(f){if(!(f instanceof window.HTMLCanvasElement))throw"the argumant must be a canvas element";var a={};a.a=f.getContext("2d");a.g=null;a.lineWidth=1;a.scale={x:1,y:1};a.rotate=0;a.translate={x:0,y:0};setInterval(function(){a.i()},100);a.i=function(){var b=getComputedStyle(a.a.canvas),c=a.g.style;c.position="absolute";c.border=b.border;c.left=a.a.canvas.offsetLeft+"px";c.top=a.a.canvas.offsetTop+"px";a.g.setAttribute("width",a.a.canvas.width);a.g.setAttribute("height",a.a.canvas.height)};
a.j=function(){var b=document.createElementNS("http://www.w3.org/2000/svg","svg");a.g=b;document.querySelector("body").appendChild(b)}();a.h=function(a){var b="click contextmenu dbclick mousedown mouseenter mouseleave mousemove mouseover mouseout mouseup".split(" ");return{m:function(c,e){if(-1==b.indexOf(c))throw'unsupport "'+c+'" event';a.addEventListener(c,e);return this},l:function(c,e){if(2===arguments.length){if(-1==b.indexOf(c))throw'unsupport "'+c+'" event';a.removeEventListener(c,e)}else{var d=
a.cloneNode();a.parentNode.replaceChild(d,a)}return this}}};a.b=function(b,c){var d=null,e=c.x*a.scale.x,k=c.y*a.scale.y;"rect"===b?(d=document.createElementNS(a.g.namespaceURI,"rect"),d.setAttribute("x",e),d.setAttribute("y",k),d.setAttribute("width",c.f*a.scale.x),d.setAttribute("height",c.c*a.scale.y)):"circle"===b&&(d=document.createElementNS(a.g.namespaceURI,"ellipse"),d.setAttribute("cx",e),d.setAttribute("cy",k),d.setAttribute("rx",c.r*a.scale.x),d.setAttribute("ry",c.r*a.scale.y));d.setAttribute("fill",
"transparent");d.setAttribute("stroke","transparent");d.setAttribute("stroke-width",a.lineWidth);d.setAttribute("transform","rotate("+a.rotate/(Math.PI/180)+") translate("+a.translate.x+","+a.translate.y+")");a.g.appendChild(d);return a.h(d)};f={rect:function(b,c,d,e){a.a.rect(b,c,d,e);return a.b("rect",{x:b,y:c,f:d,c:e})},fillRect:function(b,c,d,e){a.a.fillRect(b,c,d,e);return a.b("rect",{x:b,y:c,f:d,c:e})},strokeRect:function(b,c,d,e){a.a.strokeRect(b,c,d,e);return a.b("rect",{x:b,y:c,f:d,c:e})},
clearRect:function(b,c,d,e){a.a.clearRect(b,c,d,e);return a.b("rect",{x:b,y:c,f:d,c:e})},arc:function(b,c,d,e,k,f,h){a.a.arc(b,c,d,k,f,h);return a.b("circle",{x:b,y:c,r:d})},createLinearGradient:function(b,c,d,e){return a.a.createLinearGradient(b,c,d,e)},createPattern:function(b,c){return a.a.createPattern(b,c)},createRadialGradient:function(b,c,d,e,k,f){return a.a.createRadialGradient(b,c,d,e,k,f)},fill:function(){return a.a.fill()},stroke:function(){return a.a.stroke()},beginPath:function(){return a.a.beginPath()},
moveTo:function(b,c){return a.a.moveTo(b,c)},closePath:function(){return a.a.closePath()},lineTo:function(b,c){return a.a.lineTo(b,c)},clip:function(){return a.a.clip()},quadraticCurveTo:function(b,c,d,e){return a.a.quadraticCurveTo(b,c,d,e)},bezierCurveTo:function(b,c,d,e,f,g){return a.a.bezierCurveTo(b,c,d,e,f,g)},arcTo:function(b,c,d,e,f){return a.a.arcTo(b,c,d,e,f)},isPointInPath:function(b,c){return a.a.isPointInPath(b,c)},scale:function(b,c){a.scale.x=b;a.scale.y=c;return a.a.scale(b,c)},rotate:function(b){a.rotate=
b;return a.a.rotate(b)},translate:function(b,c){a.translate.x=b;a.translate.y=c;return a.a.translate(b,c)},transform:function(b,c,d,e,f,g){return a.a.transform(b,c,d,e,f,g)},setTransform:function(b,c,d,e,f,g){return a.a.setTransform(b,c,d,e,f,g)},fillText:function(b,c,d,e){a.a.fillText(b,c,d,e);e=parseInt(a.a.font,10);return a.b("rect",{x:c,y:d-e,f:a.a.measureText(b).width,c:e})},strokeText:function(b,c,d,e){a.a.strokeText(b,c,d,e);e=parseInt(a.a.font,10);return a.b("rect",{x:c,y:d-e,f:a.a.measureText(b).width,
c:e})},measureText:function(b){return a.a.measureText(b)},drawImage:function(b,c,d,e,f,g,h,l,m){if(3===arguments.length)return a.a.drawImage(b,c,d),a.b("rect",{x:c,y:d,f:b.width,c:b.height});if(5===arguments.length)return a.a.drawImage(b,c,d,e,f),a.b("rect",{x:c,y:d,f:e,c:f});if(9===arguments.length)return a.a.drawImage(b,c,d,e,f,g,h,l,m),a.b("rect",{x:g,y:h,f:l,c:m});throw'Unkonwn function "drawImage" with '+arguments.length+" arguments";},createImageData:function(b,c){if(1===arguments.length)return a.a.createImageData(b);
if(2===arguments.length)return a.a.createImageData(b,c);throw'Unkonwn function "createImageData" with '+arguments.length+" arguments";},getImageData:function(b,c,d,e){return a.a.getImageData(b,c,d,e)},putImageData:function(b,c,d,e,f,g,h){if(3===arguments.length)return a.a.putImageData(b,c,d),a.b("rect",{x:c,y:d,f:b.width,c:b.height});if(7===arguments.length)return a.a.putImageData(b,c,d,e,f,g,h),a.b("rect",{x:c+e,y:d+f,f:g-e,c:h-f});throw'Unkonwn function "putImageData" with '+arguments.length+" arguments";
},save:function(){return a.a.save()},restore:function(){return a.a.restore()},getContext:function(b,c){return a.a.getContext(b,c)},toDataURL:function(b,c){if(0===arguments.length)return a.a.toDataURL();if(2===arguments.length)return a.a.toDataURL(b,c);throw'Unkonwn function "toDataURL" with '+arguments.length+" arguments";}};Object.defineProperty(f,"fillStyle",{get:function(){return a.a.fillStyle},set:function(b){a.a.fillStyle=b}});Object.defineProperty(f,"strokeStyle",{get:function(){return a.a.strokeStyle},
set:function(b){a.a.strokeStyle=b}});Object.defineProperty(f,"shadowColor",{get:function(){return a.a.shadowColor},set:function(b){a.a.shadowColor=b}});Object.defineProperty(f,"shadowBlur",{get:function(){return a.a.shadowBlur},set:function(b){a.a.shadowBlur=b}});Object.defineProperty(f,"shadowOffsetX",{get:function(){return a.a.shadowOffsetX},set:function(b){a.a.shadowOffsetX=b}});Object.defineProperty(f,"shadowOffsetY",{get:function(){return a.a.shadowOffsetY},set:function(b){a.a.shadowOffsetY=
b}});Object.defineProperty(f,"lineCap",{get:function(){return a.a.lineCap},set:function(b){a.a.lineCap=b}});Object.defineProperty(f,"lineJoin",{get:function(){return a.a.lineJoin},set:function(b){a.a.lineJoin=b}});Object.defineProperty(f,"lineWidth",{get:function(){return a.a.lineWidth},set:function(b){a.a.lineWidth=b;a.lineWidth=b}});Object.defineProperty(f,"miterLimit",{get:function(){return a.a.miterLimit},set:function(b){a.a.miterLimit=b}});Object.defineProperty(f,"font",{get:function(){return a.a.font},
set:function(b){a.a.font=b}});Object.defineProperty(f,"textAlign",{get:function(){return a.a.textAlign},set:function(b){a.a.textAlign=b}});Object.defineProperty(f,"textBaseline",{get:function(){return a.a.textBaseline},set:function(b){a.a.textBaseline=b}});Object.defineProperty(f,"globalAlpha",{get:function(){return a.a.globalAlpha},set:function(b){a.a.globalAlpha=b}});Object.defineProperty(f,"globalCompositeOperation",{get:function(){return a.a.globalCompositeOperation},set:function(b){a.a.globalCompositeOperation=
b}});return f};
